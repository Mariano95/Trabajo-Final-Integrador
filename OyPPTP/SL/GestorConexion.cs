using System;
using System.Configuration;
using DAL;

namespace SL
{
    public class GestorConexion
    {

        /////////////////////////////////////////////////////////////////////////////////////////////
        ////////////////////////////////////    CONSTRUCTOR     /////////////////////////////////////
        /////////////////////////////////////////////////////////////////////////////////////////////

        public GestorConexion() {}

        /////////////////////////////////////////////////////////////////////////////////////////////
        ////////////////////////////////    FUNCIONES PUBLICAS     //////////////////////////////////
        /////////////////////////////////////////////////////////////////////////////////////////////

        public bool ProbarConexionBD()
        {
            DAL.DAL miDAL = DAL.DAL.GetDAL();

            string stringConexionEncryptedB64 = RecuperarStringConexion();
            string stringConexionDecrypted = miDAL.DesencriptarAES(stringConexionEncryptedB64);

            bool resultado = miDAL.ConectarBD(stringConexionDecrypted);
            return resultado;
        }

        public bool ConectarBD(string stringConexion) {

            DAL.DAL miDAL = DAL.DAL.GetDAL();

            bool resultado = miDAL.ConectarBD(stringConexion);
            return resultado;
        }

        /////////////////////////////////////////////////////////////////////////////////////////////
        ///////////////////////////////    FUNCIONES AXILIARES     //////////////////////////////////
        /////////////////////////////////////////////////////////////////////////////////////////////

        private string RecuperarStringConexion()
        {
            return ConfigurationManager.ConnectionStrings["connectionString"].ConnectionString;
        }

    }

}
